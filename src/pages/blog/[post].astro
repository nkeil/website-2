---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';
import Heading from '../../components/Heading.astro';

export async function getStaticPaths() {
  const posts = await getCollection('blog');
  return posts.map((post) => ({
    params: { post: post.slug },
    props: { post },
  }));
}

const { post } = Astro.props;

const { Content } = await post.render();

const { title, description, date } = post.data;
const month = date.toLocaleString('default', { month: 'long' });
const formattedDate = `${date.getDate()} ${month} ${date.getFullYear()}`;
---

<Layout {title} current="blog">
  <Heading
    value={title}
    subtext={description}
    subsubtext={`written ${formattedDate}`}
  />
  <article>
    <Content />
  </article>
</Layout>

<style>
  .pub-date {
    margin-top: 50px;
    font-size: 2.5rem;
    text-align: center;
  }
</style>
